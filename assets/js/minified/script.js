"use strict";(function($,l10n){"use strict";var script={cache:function cache(){this.els={};this.vars={};this.vars.wc=".woocommerce";this.vars.messages=".woocommerce-error, .woocommerce-message";this.els.$form=$("form.woocommerce-checkout");this.els.$orderReview=$("form#order_review");this.els.$gateway=$("#payment_method_woo-paddle-gateway")},init:function init(){this.cache();this.bindEvents()},bindEvents:function bindEvents(){this.els.$form.on("submit",this.handleOnSubmit);this.els.$orderReview.on("submit",this.handleOnSubmit)},handleOnSubmit:function handleOnSubmit(event){if(!script.els.$gateway.is(":checked")){return}event.preventDefault();event.stopImmediatePropagation();event.stopPropagation();var $form=$(this);if($form.is(".processing")){return false}$.ajax({type:"POST",async:true,dataType:"json",url:l10n.checkout_uri,data:$form.serialize(),beforeSend:function beforeSend(){$form.block({message:null,overlayCSS:{background:"#fff",opacity:0.6}})},success:function success(response){$(script.vars.messages).remove();try{if("success"===response.result){if(-1===response.generate_pay_link.indexOf("https://")||-1===response.generate_pay_link.indexOf("http://")){window.location=response.generate_pay_link}else{window.location=decodeURI(response.generate_pay_link)}}else if("failure"===response.result){throw"Result failure"}else{throw"Invalid response"}}catch(err){if(true===response.reload){window.location.reload();return}if(true===response.refresh){$(document.body).trigger("update_checkout")}$form.unblock();$(script.vars.messages).remove();if(response.messages){$form.prepend(response.messages)}$form.removeClass("processing").unblock();$form.find(".input-text, select").blur();script.scrollToNotices()}}})},scrollToNotices:function scrollToNotices(){var $selector=$(this.vars.messages);if(!$selector.length){return}$("html, body").animate({scrollTop:$selector.offset().top-100},1000)}};script.init()})(jQuery,woo_paddle_gateway_params);